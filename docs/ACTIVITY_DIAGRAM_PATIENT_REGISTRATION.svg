<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #2c3e50; }
      .label { font-family: Arial, sans-serif; font-size: 12px; fill: #2c3e50; }
      .start-end { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
      .activity { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
      .decision { fill: #f39c12; stroke: #e67e22; stroke-width: 2; }
      .arrow { stroke: #2c3e50; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .error { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2c3e50" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" class="title">Activity Diagram: Registrasi Pasien Baru</text>
  
  <!-- Start -->
  <circle cx="400" cy="70" r="15" class="start-end"/>
  <text x="400" y="75" text-anchor="middle" class="label" fill="white">Start</text>
  
  <!-- Input Data Pasien -->
  <rect x="320" y="110" width="160" height="40" rx="20" class="activity"/>
  <text x="400" y="135" text-anchor="middle" class="label" fill="white">Input Data Pasien</text>
  
  <!-- Validasi NIK -->
  <rect x="320" y="180" width="160" height="40" rx="20" class="activity"/>
  <text x="400" y="205" text-anchor="middle" class="label" fill="white">Validasi NIK</text>
  
  <!-- Decision: NIK Valid? -->
  <polygon points="400,250 450,280 400,310 350,280" class="decision"/>
  <text x="400" y="285" text-anchor="middle" class="label">NIK Valid?</text>
  
  <!-- Error Path -->
  <rect x="120" y="260" width="160" height="40" rx="20" class="error"/>
  <text x="200" y="285" text-anchor="middle" class="label" fill="white">Tampilkan Error</text>
  
  <!-- Kembali ke Form -->
  <rect x="120" y="340" width="160" height="40" rx="20" class="activity"/>
  <text x="200" y="365" text-anchor="middle" class="label" fill="white">Kembali ke Form</text>
  
  <!-- Success Path -->
  <rect x="520" y="260" width="160" height="40" rx="20" class="activity"/>
  <text x="600" y="285" text-anchor="middle" class="label" fill="white">Simpan Data Pasien</text>
  
  <!-- Generate Medical Record -->
  <rect x="520" y="340" width="160" height="40" rx="20" class="activity"/>
  <text x="600" y="365" text-anchor="middle" class="label" fill="white">Generate Medical Record</text>
  
  <!-- Tampilkan Konfirmasi -->
  <rect x="520" y="420" width="160" height="40" rx="20" class="activity"/>
  <text x="600" y="445" text-anchor="middle" class="label" fill="white">Tampilkan Konfirmasi</text>
  
  <!-- End -->
  <circle cx="600" cy="500" r="15" class="start-end"/>
  <text x="600" y="505" text-anchor="middle" class="label" fill="white">End</text>
  
  <!-- Arrows -->
  <!-- Start to Input -->
  <line x1="400" y1="85" x2="400" y2="110" class="arrow"/>
  
  <!-- Input to Validasi -->
  <line x1="400" y1="150" x2="400" y2="180" class="arrow"/>
  
  <!-- Validasi to Decision -->
  <line x1="400" y1="220" x2="400" y2="250" class="arrow"/>
  
  <!-- Decision to Error (No) -->
  <line x1="350" y1="280" x2="280" y2="280" class="arrow"/>
  <text x="315" y="275" class="label">No</text>
  
  <!-- Error to Kembali -->
  <line x1="200" y1="300" x2="200" y2="340" class="arrow"/>
  
  <!-- Kembali to Input (loop back) -->
  <path d="M 200 380 Q 100 400 100 130 Q 100 110 320 130" class="arrow" fill="none"/>
  
  <!-- Decision to Simpan (Yes) -->
  <line x1="450" y1="280" x2="520" y2="280" class="arrow"/>
  <text x="485" y="275" class="label">Yes</text>
  
  <!-- Simpan to Generate -->
  <line x1="600" y1="300" x2="600" y2="340" class="arrow"/>
  
  <!-- Generate to Konfirmasi -->
  <line x1="600" y1="380" x2="600" y2="420" class="arrow"/>
  
  <!-- Konfirmasi to End -->
  <line x1="600" y1="460" x2="600" y2="485" class="arrow"/>
  
  <!-- Legend -->
  <rect x="50" y="450" width="200" height="120" fill="none" stroke="#bdc3c7" stroke-width="1"/>
  <text x="60" y="470" class="label" font-weight="bold">Legend:</text>
  
  <circle cx="70" cy="485" r="8" class="start-end"/>
  <text x="85" y="490" class="label">Start/End</text>
  
  <rect x="62" y="500" width="16" height="10" rx="5" class="activity"/>
  <text x="85" y="510" class="label">Activity</text>
  
  <polygon points="70,520 78,528 70,536 62,528" class="decision"/>
  <text x="85" y="530" class="label">Decision</text>
  
  <rect x="62" y="545" width="16" height="10" rx="5" class="error"/>
  <text x="85" y="555" class="label">Error/Exception</text>
</svg>