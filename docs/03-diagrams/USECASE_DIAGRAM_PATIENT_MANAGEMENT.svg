<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; text-anchor: middle; }
      .actor { font-family: Arial, sans-serif; font-size: 12px; text-anchor: middle; }
      .usecase { font-family: Arial, sans-serif; font-size: 10px; text-anchor: middle; }
      .system-boundary { fill: none; stroke: #333; stroke-width: 2; stroke-dasharray: 5,5; }
      .actor-line { stroke: #333; stroke-width: 1; }
      .usecase-oval { fill: #e8f5e8; stroke: #333; stroke-width: 1; }
      .actor-stick { fill: none; stroke: #333; stroke-width: 2; }
    </style>
  </defs>
  
  <!-- Title -->
  <text x="450" y="30" class="title">Use Case Diagram - Modul Manajemen Pasien (Puskesmas)</text>
  
  <!-- System Boundary -->
  <rect x="200" y="80" width="600" height="520" class="system-boundary" rx="10"/>
  <text x="500" y="100" class="actor" font-weight="bold">Sistem Manajemen Pasien</text>
  
  <!-- Actor: Petugas Puskesmas -->
  <g id="petugas">
    <circle cx="100" cy="300" r="15" fill="#4caf50" stroke="#333" stroke-width="2"/>
    <line x1="100" y1="315" x2="100" y2="350" class="actor-stick"/>
    <line x1="85" y1="330" x2="115" y2="330" class="actor-stick"/>
    <line x1="100" y1="350" x2="85" y2="380" class="actor-stick"/>
    <line x1="100" y1="350" x2="115" y2="380" class="actor-stick"/>
    <text x="100" y="400" class="actor">Petugas</text>
    <text x="100" y="415" class="actor">Puskesmas</text>
  </g>
  
  <!-- Use Cases Row 1 -->
  <!-- Register Patient -->
  <ellipse cx="320" cy="150" rx="70" ry="25" class="usecase-oval"/>
  <text x="320" y="155" class="usecase">Register Patient</text>
  
  <!-- View Patients -->
  <ellipse cx="520" cy="150" rx="65" ry="25" class="usecase-oval"/>
  <text x="520" y="155" class="usecase">View Patients</text>
  
  <!-- Search Patient -->
  <ellipse cx="680" cy="150" rx="65" ry="25" class="usecase-oval"/>
  <text x="680" y="155" class="usecase">Search Patient</text>
  
  <!-- Use Cases Row 2 -->
  <!-- Update Patient -->
  <ellipse cx="320" cy="220" rx="70" ry="25" class="usecase-oval"/>
  <text x="320" y="225" class="usecase">Update Patient</text>
  
  <!-- Delete Patient -->
  <ellipse cx="520" cy="220" rx="65" ry="25" class="usecase-oval"/>
  <text x="520" y="225" class="usecase">Delete Patient</text>
  
  <!-- Export Patient Data -->
  <ellipse cx="680" cy="220" rx="75" ry="25" class="usecase-oval"/>
  <text x="680" y="225" class="usecase">Export Patient Data</text>
  
  <!-- Use Cases Row 3 -->
  <!-- Add Examination Year -->
  <ellipse cx="320" cy="290" rx="80" ry="25" class="usecase-oval"/>
  <text x="320" y="295" class="usecase">Add Examination Year</text>
  
  <!-- Remove Examination Year -->
  <ellipse cx="520" cy="290" rx="85" ry="25" class="usecase-oval"/>
  <text x="520" y="295" class="usecase">Remove Exam Year</text>
  
  <!-- View Patient History -->
  <ellipse cx="680" cy="290" rx="80" ry="25" class="usecase-oval"/>
  <text x="680" y="295" class="usecase">View Patient History</text>
  
  <!-- Use Cases Row 4 -->
  <!-- Validate Patient Data -->
  <ellipse cx="420" cy="360" rx="80" ry="25" class="usecase-oval"/>
  <text x="420" y="365" class="usecase">Validate Patient Data</text>
  
  <!-- Manage Medical Record -->
  <ellipse cx="600" cy="360" rx="85" ry="25" class="usecase-oval"/>
  <text x="600" y="365" class="usecase">Manage Medical Record</text>
  
  <!-- Connections from Petugas Puskesmas -->
  <line x1="115" y1="280" x2="250" y2="150" class="actor-line"/>
  <line x1="115" y1="290" x2="455" y2="150" class="actor-line"/>
  <line x1="115" y1="300" x2="615" y2="150" class="actor-line"/>
  
  <line x1="115" y1="310" x2="250" y2="220" class="actor-line"/>
  <line x1="115" y1="320" x2="455" y2="220" class="actor-line"/>
  <line x1="115" y1="330" x2="605" y2="220" class="actor-line"/>
  
  <line x1="115" y1="340" x2="240" y2="290" class="actor-line"/>
  <line x1="115" y1="350" x2="435" y2="290" class="actor-line"/>
  <line x1="115" y1="360" x2="600" y2="290" class="actor-line"/>
  
  <line x1="115" y1="370" x2="340" y2="360" class="actor-line"/>
  <line x1="115" y1="380" x2="515" y2="360" class="actor-line"/>
  
  <!-- Include relationships -->
  <g stroke="#666" stroke-dasharray="3,3" fill="none">
    <!-- Register includes Validate -->
    <line x1="350" y1="175" x2="390" y2="335"/>
    <text x="370" y="255" class="usecase" font-size="8" fill="#666">«include»</text>
    
    <!-- Update includes View -->
    <line x1="390" y1="205" x2="455" y2="165"/>
    <text x="422" y="185" class="usecase" font-size="8" fill="#666">«include»</text>
    
    <!-- Delete includes View -->
    <line x1="520" y1="195" x2="520" y2="175"/>
    <text x="525" y="185" class="usecase" font-size="8" fill="#666">«include»</text>
    
    <!-- Search extends View -->
    <line x1="615" y1="150" x2="585" y2="150"/>
    <text x="600" y="145" class="usecase" font-size="8" fill="#666">«extend»</text>
    
    <!-- Export extends View -->
    <line x1="605" y1="205" x2="585" y2="165"/>
    <text x="595" y="185" class="usecase" font-size="8" fill="#666">«extend»</text>
  </g>
  
  <!-- Use Case Details -->
  <text x="220" y="450" class="usecase" font-size="9" fill="#666">
    <tspan x="220" dy="0">UC-PATIENT-001: Register Patient</tspan>
    <tspan x="220" dy="12">UC-PATIENT-002: View Patients</tspan>
    <tspan x="220" dy="12">UC-PATIENT-003: Update Patient</tspan>
    <tspan x="220" dy="12">UC-PATIENT-004: Delete Patient</tspan>
    <tspan x="220" dy="12">UC-PATIENT-005: Add Examination Year</tspan>
    <tspan x="220" dy="12">UC-PATIENT-006: Remove Examination Year</tspan>
  </text>
  
  <!-- Patient Data Fields -->
  <rect x="550" y="430" width="200" height="120" fill="#fff3e0" stroke="#ff9800" stroke-width="1" rx="5"/>
  <text x="650" y="445" class="usecase" font-weight="bold" font-size="9">Data Pasien:</text>
  <text x="560" y="460" class="usecase" font-size="8">
    <tspan x="560" dy="0">• NIK (opsional, unik)</tspan>
    <tspan x="560" dy="12">• Nomor BPJS (opsional)</tspan>
    <tspan x="560" dy="12">• Nomor Rekam Medis (wajib, unik)</tspan>
    <tspan x="560" dy="12">• Nama Lengkap</tspan>
    <tspan x="560" dy="12">• Alamat</tspan>
    <tspan x="560" dy="12">• Jenis Kelamin</tspan>
    <tspan x="560" dy="12">• Tanggal Lahir &amp; Umur</tspan>
    <tspan x="560" dy="12">• Status HT/DM</tspan>
    <tspan x="560" dy="12">• Tahun Pemeriksaan HT/DM</tspan>
  </text>
  
  <!-- Legend -->
  <rect x="50" y="620" width="800" height="60" fill="#f5f5f5" stroke="#ccc" stroke-width="1" rx="5"/>
  <text x="60" y="640" class="usecase" font-weight="bold">Keterangan:</text>
  <text x="60" y="655" class="usecase" font-size="9">
    <tspan x="60" dy="0">• Petugas hanya dapat mengelola pasien di puskesmas sendiri</tspan>
    <tspan x="60" dy="12">• NIK dan nomor rekam medis harus unik, BPJS opsional</tspan>
    <tspan x="60" dy="12">• Tahun pemeriksaan menentukan status has_ht dan has_dm pasien</tspan>
    <tspan x="400" dy="0">• Export mendukung format Excel dengan filter data</tspan>
    <tspan x="400" dy="12">• Penghapusan pasien akan menghapus semua data pemeriksaan terkait</tspan>
  </text>
</svg>