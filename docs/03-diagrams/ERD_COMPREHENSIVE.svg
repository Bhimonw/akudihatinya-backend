<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .entity-box { fill: #f8f9fa; stroke: #343a40; stroke-width: 2; }
      .entity-title { fill: #495057; font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; }
      .entity-field { fill: #6c757d; font-family: Arial, sans-serif; font-size: 11px; }
      .pk-field { fill: #dc3545; font-weight: bold; }
      .fk-field { fill: #007bff; font-weight: bold; }
      .relationship-line { stroke: #6c757d; stroke-width: 2; fill: none; }
      .relationship-text { fill: #495057; font-family: Arial, sans-serif; font-size: 10px; }
    </style>
  </defs>
  
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" class="entity-title" font-size="18">Entity Relationship Diagram - Akudihatinya System</text>
  
  <!-- Users Entity -->
  <rect x="50" y="60" width="180" height="160" class="entity-box"/>
  <text x="140" y="80" text-anchor="middle" class="entity-title">Users</text>
  <line x1="60" y1="85" x2="220" y2="85" stroke="#343a40" stroke-width="1"/>
  <text x="60" y="100" class="entity-field pk-field">id (PK)</text>
  <text x="60" y="115" class="entity-field">username (UNIQUE)</text>
  <text x="60" y="130" class="entity-field">password</text>
  <text x="60" y="145" class="entity-field">name</text>
  <text x="60" y="160" class="entity-field">profile_picture</text>
  <text x="60" y="175" class="entity-field">role</text>
  <text x="60" y="190" class="entity-field fk-field">puskesmas_id (FK)</text>
  <text x="60" y="205" class="entity-field">timestamps</text>
  
  <!-- Puskesmas Entity -->
  <rect x="300" y="60" width="180" height="120" class="entity-box"/>
  <text x="390" y="80" text-anchor="middle" class="entity-title">Puskesmas</text>
  <line x1="310" y1="85" x2="470" y2="85" stroke="#343a40" stroke-width="1"/>
  <text x="310" y="100" class="entity-field pk-field">id (PK)</text>
  <text x="310" y="115" class="entity-field">name</text>
  <text x="310" y="130" class="entity-field">created_at</text>
  <text x="310" y="145" class="entity-field">updated_at</text>
  
  <!-- Patients Entity -->
  <rect x="550" y="60" width="200" height="220" class="entity-box"/>
  <text x="650" y="80" text-anchor="middle" class="entity-title">Patients</text>
  <line x1="560" y1="85" x2="740" y2="85" stroke="#343a40" stroke-width="1"/>
  <text x="560" y="100" class="entity-field pk-field">id (PK)</text>
  <text x="560" y="115" class="entity-field fk-field">puskesmas_id (FK)</text>
  <text x="560" y="130" class="entity-field">nik (UNIQUE)</text>
  <text x="560" y="145" class="entity-field">bpjs_number</text>
  <text x="560" y="160" class="entity-field">medical_record_number</text>
  <text x="560" y="175" class="entity-field">name</text>
  <text x="560" y="190" class="entity-field">address</text>
  <text x="560" y="205" class="entity-field">phone_number</text>
  <text x="560" y="220" class="entity-field">gender</text>
  <text x="560" y="235" class="entity-field">birth_date</text>
  <text x="560" y="250" class="entity-field">age</text>
  <text x="560" y="265" class="entity-field">timestamps</text>
  
  <!-- HT_Examinations Entity -->
  <rect x="50" y="300" width="220" height="200" class="entity-box"/>
  <text x="160" y="320" text-anchor="middle" class="entity-title">HT_Examinations</text>
  <line x1="60" y1="325" x2="260" y2="325" stroke="#343a40" stroke-width="1"/>
  <text x="60" y="340" class="entity-field pk-field">id (PK)</text>
  <text x="60" y="355" class="entity-field fk-field">patient_id (FK)</text>
  <text x="60" y="370" class="entity-field fk-field">puskesmas_id (FK)</text>
  <text x="60" y="385" class="entity-field">examination_date</text>
  <text x="60" y="400" class="entity-field">systolic</text>
  <text x="60" y="415" class="entity-field">diastolic</text>
  <text x="60" y="430" class="entity-field">is_controlled</text>
  <text x="60" y="445" class="entity-field">is_first_visit_this_month</text>
  <text x="60" y="460" class="entity-field">is_standard_patient</text>
  <text x="60" y="475" class="entity-field">year, month</text>
  <text x="60" y="490" class="entity-field">timestamps</text>
  
  <!-- DM_Examinations Entity -->
  <rect x="320" y="300" width="220" height="200" class="entity-box"/>
  <text x="430" y="320" text-anchor="middle" class="entity-title">DM_Examinations</text>
  <line x1="330" y1="325" x2="530" y2="325" stroke="#343a40" stroke-width="1"/>
  <text x="330" y="340" class="entity-field pk-field">id (PK)</text>
  <text x="330" y="355" class="entity-field fk-field">patient_id (FK)</text>
  <text x="330" y="370" class="entity-field fk-field">puskesmas_id (FK)</text>
  <text x="330" y="385" class="entity-field">examination_date</text>
  <text x="330" y="400" class="entity-field">examination_type</text>
  <text x="330" y="415" class="entity-field">result</text>
  <text x="330" y="430" class="entity-field">is_controlled</text>
  <text x="330" y="445" class="entity-field">is_first_visit_this_month</text>
  <text x="330" y="460" class="entity-field">is_standard_patient</text>
  <text x="330" y="475" class="entity-field">year, month</text>
  <text x="330" y="490" class="entity-field">timestamps</text>
  
  <!-- Yearly_Targets Entity -->
  <rect x="600" y="300" width="180" height="140" class="entity-box"/>
  <text x="690" y="320" text-anchor="middle" class="entity-title">Yearly_Targets</text>
  <line x1="610" y1="325" x2="770" y2="325" stroke="#343a40" stroke-width="1"/>
  <text x="610" y="340" class="entity-field pk-field">id (PK)</text>
  <text x="610" y="355" class="entity-field fk-field">puskesmas_id (FK)</text>
  <text x="610" y="370" class="entity-field">disease_type</text>
  <text x="610" y="385" class="entity-field">year</text>
  <text x="610" y="400" class="entity-field">target_count</text>
  <text x="610" y="415" class="entity-field">timestamps</text>
  
  <!-- User_Refresh_Tokens Entity -->
  <rect x="50" y="550" width="200" height="120" class="entity-box"/>
  <text x="150" y="570" text-anchor="middle" class="entity-title">User_Refresh_Tokens</text>
  <line x1="60" y1="575" x2="240" y2="575" stroke="#343a40" stroke-width="1"/>
  <text x="60" y="590" class="entity-field pk-field">id (PK)</text>
  <text x="60" y="605" class="entity-field fk-field">user_id (FK)</text>
  <text x="60" y="620" class="entity-field">token</text>
  <text x="60" y="635" class="entity-field">expires_at</text>
  <text x="60" y="650" class="entity-field">timestamps</text>
  
  <!-- Monthly_Statistics_Cache Entity -->
  <rect x="320" y="550" width="220" height="140" class="entity-box"/>
  <text x="430" y="570" text-anchor="middle" class="entity-title">Monthly_Statistics_Cache</text>
  <line x1="330" y1="575" x2="530" y2="575" stroke="#343a40" stroke-width="1"/>
  <text x="330" y="590" class="entity-field pk-field">id (PK)</text>
  <text x="330" y="605" class="entity-field fk-field">puskesmas_id (FK)</text>
  <text x="330" y="620" class="entity-field">disease_type</text>
  <text x="330" y="635" class="entity-field">year, month</text>
  <text x="330" y="650" class="entity-field">statistics_data (JSON)</text>
  <text x="330" y="665" class="entity-field">timestamps</text>
  
  <!-- Relationships -->
  
  <!-- Users to Puskesmas (Many-to-One) -->
  <path d="M 230 140 L 300 140" class="relationship-line"/>
  <circle cx="230" cy="140" r="3" fill="#6c757d"/>
  <path d="M 295 135 L 300 140 L 295 145" stroke="#6c757d" stroke-width="2" fill="none"/>
  <text x="265" y="135" class="relationship-text">belongs to</text>
  
  <!-- Puskesmas to Patients (One-to-Many) -->
  <path d="M 480 120 L 550 120" class="relationship-line"/>
  <circle cx="480" cy="120" r="3" fill="#6c757d"/>
  <path d="M 545 115 L 550 120 L 545 125" stroke="#6c757d" stroke-width="2" fill="none"/>
  <text x="515" y="115" class="relationship-text">has</text>
  
  <!-- Patients to HT_Examinations (One-to-Many) -->
  <path d="M 550 200 L 270 300" class="relationship-line"/>
  <circle cx="550" cy="200" r="3" fill="#6c757d"/>
  <path d="M 275 295 L 270 300 L 280 300" stroke="#6c757d" stroke-width="2" fill="none"/>
  <text x="400" y="250" class="relationship-text">has HT exams</text>
  
  <!-- Patients to DM_Examinations (One-to-Many) -->
  <path d="M 600 280 L 430 300" class="relationship-line"/>
  <circle cx="600" cy="280" r="3" fill="#6c757d"/>
  <path d="M 435 295 L 430 300 L 440 300" stroke="#6c757d" stroke-width="2" fill="none"/>
  <text x="515" y="295" class="relationship-text">has DM exams</text>
  
  <!-- Puskesmas to Yearly_Targets (One-to-Many) -->
  <path d="M 480 160 L 600 300" class="relationship-line"/>
  <circle cx="480" cy="160" r="3" fill="#6c757d"/>
  <path d="M 595 295 L 600 300 L 605 295" stroke="#6c757d" stroke-width="2" fill="none"/>
  <text x="540" y="230" class="relationship-text">has targets</text>
  
  <!-- Users to User_Refresh_Tokens (One-to-Many) -->
  <path d="M 140 220 L 140 550" class="relationship-line"/>
  <circle cx="140" cy="220" r="3" fill="#6c757d"/>
  <path d="M 135 545 L 140 550 L 145 545" stroke="#6c757d" stroke-width="2" fill="none"/>
  <text x="145" y="385" class="relationship-text">has tokens</text>
  
  <!-- Puskesmas to Monthly_Statistics_Cache (One-to-Many) -->
  <path d="M 390 180 L 430 550" class="relationship-line"/>
  <circle cx="390" cy="180" r="3" fill="#6c757d"/>
  <path d="M 425 545 L 430 550 L 435 545" stroke="#6c757d" stroke-width="2" fill="none"/>
  <text x="395" y="365" class="relationship-text">has cache</text>
  
  <!-- Legend -->
  <rect x="850" y="60" width="300" height="200" fill="#f8f9fa" stroke="#343a40" stroke-width="1"/>
  <text x="1000" y="80" text-anchor="middle" class="entity-title">Legend</text>
  <line x1="860" y1="85" x2="1140" y2="85" stroke="#343a40" stroke-width="1"/>
  
  <text x="860" y="105" class="entity-field pk-field">Primary Key (PK)</text>
  <text x="860" y="125" class="entity-field fk-field">Foreign Key (FK)</text>
  <text x="860" y="145" class="entity-field">Regular Field</text>
  
  <circle cx="860" cy="165" r="3" fill="#6c757d"/>
  <text x="875" y="170" class="relationship-text">One (1)</text>
  
  <path d="M 860 185 L 870 185" stroke="#6c757d" stroke-width="2"/>
  <path d="M 865 180 L 870 185 L 865 190" stroke="#6c757d" stroke-width="2" fill="none"/>
  <text x="875" y="190" class="relationship-text">Many (*)</text>
  
  <text x="860" y="215" class="relationship-text">Relationship Direction</text>
  
  <!-- Database Info -->
  <text x="600" y="750" text-anchor="middle" class="entity-title" font-size="12">Database: MySQL | Framework: Laravel 11 | ORM: Eloquent</text>
  <text x="600" y="770" text-anchor="middle" class="relationship-text">Total Entities: 8 | Total Relationships: 7 | Normalization: 3NF</text>
</svg>