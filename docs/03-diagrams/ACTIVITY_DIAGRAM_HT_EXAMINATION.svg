<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #2c3e50; }
      .label { font-family: Arial, sans-serif; font-size: 11px; fill: #2c3e50; }
      .small-label { font-family: Arial, sans-serif; font-size: 10px; fill: #2c3e50; }
      .start-end { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
      .activity { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
      .decision { fill: #f39c12; stroke: #e67e22; stroke-width: 2; }
      .process { fill: #27ae60; stroke: #229954; stroke-width: 2; }
      .arrow { stroke: #2c3e50; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .error { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2c3e50" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" class="title">Activity Diagram: Pencatatan Pemeriksaan Hipertensi (HT)</text>
  
  <!-- Start -->
  <circle cx="450" cy="70" r="15" class="start-end"/>
  <text x="450" y="75" text-anchor="middle" class="label" fill="white">Start</text>
  
  <!-- Pilih Pasien -->
  <rect x="370" y="110" width="160" height="40" rx="20" class="activity"/>
  <text x="450" y="135" text-anchor="middle" class="label" fill="white">Pilih Pasien</text>
  
  <!-- Input Tekanan Darah -->
  <rect x="370" y="180" width="160" height="40" rx="20" class="activity"/>
  <text x="450" y="200" text-anchor="middle" class="label" fill="white">Input Tekanan Darah</text>
  <text x="450" y="215" text-anchor="middle" class="small-label" fill="white">(Sistolik/Diastolik)</text>
  
  <!-- Validasi Input -->
  <rect x="370" y="250" width="160" height="40" rx="20" class="process"/>
  <text x="450" y="275" text-anchor="middle" class="label" fill="white">Validasi Input</text>
  
  <!-- Decision: Input Valid? -->
  <polygon points="450,320 500,350 450,380 400,350" class="decision"/>
  <text x="450" y="355" text-anchor="middle" class="label">Input Valid?</text>
  
  <!-- Error Path -->
  <rect x="150" y="330" width="160" height="40" rx="20" class="error"/>
  <text x="230" y="355" text-anchor="middle" class="label" fill="white">Show Error</text>
  
  <!-- Kembali -->
  <rect x="150" y="410" width="160" height="40" rx="20" class="activity"/>
  <text x="230" y="435" text-anchor="middle" class="label" fill="white">Kembali ke Input</text>
  
  <!-- Success Path: Hitung Status Terkontrol -->
  <rect x="570" y="330" width="180" height="40" rx="20" class="process"/>
  <text x="660" y="350" text-anchor="middle" class="label" fill="white">Hitung Status Terkontrol</text>
  <text x="660" y="365" text-anchor="middle" class="small-label" fill="white">(90-139/60-89 mmHg)</text>
  
  <!-- Cek Kunjungan Pertama -->
  <rect x="570" y="400" width="180" height="40" rx="20" class="process"/>
  <text x="660" y="420" text-anchor="middle" class="label" fill="white">Cek Kunjungan Pertama</text>
  <text x="660" y="435" text-anchor="middle" class="small-label" fill="white">Bulan Ini</text>
  
  <!-- Update Statistik -->
  <rect x="570" y="470" width="180" height="40" rx="20" class="process"/>
  <text x="660" y="495" text-anchor="middle" class="label" fill="white">Update Statistik</text>
  
  <!-- Simpan Data -->
  <rect x="370" y="540" width="160" height="40" rx="20" class="activity"/>
  <text x="450" y="565" text-anchor="middle" class="label" fill="white">Simpan Data</text>
  
  <!-- Tampilkan Hasil -->
  <rect x="370" y="610" width="160" height="40" rx="20" class="activity"/>
  <text x="450" y="635" text-anchor="middle" class="label" fill="white">Tampilkan Hasil</text>
  
  <!-- End -->
  <circle cx="450" cy="680" r="15" class="start-end"/>
  <text x="450" y="685" text-anchor="middle" class="label" fill="white">End</text>
  
  <!-- Arrows -->
  <!-- Start to Pilih Pasien -->
  <line x1="450" y1="85" x2="450" y2="110" class="arrow"/>
  
  <!-- Pilih Pasien to Input -->
  <line x1="450" y1="150" x2="450" y2="180" class="arrow"/>
  
  <!-- Input to Validasi -->
  <line x1="450" y1="220" x2="450" y2="250" class="arrow"/>
  
  <!-- Validasi to Decision -->
  <line x1="450" y1="290" x2="450" y2="320" class="arrow"/>
  
  <!-- Decision to Error (No) -->
  <line x1="400" y1="350" x2="310" y2="350" class="arrow"/>
  <text x="355" y="345" class="label">No</text>
  
  <!-- Error to Kembali -->
  <line x1="230" y1="370" x2="230" y2="410" class="arrow"/>
  
  <!-- Kembali to Input (loop back) -->
  <path d="M 230 450 Q 100 470 100 200 Q 100 180 370 200" class="arrow" fill="none"/>
  
  <!-- Decision to Hitung Status (Yes) -->
  <line x1="500" y1="350" x2="570" y2="350" class="arrow"/>
  <text x="535" y="345" class="label">Yes</text>
  
  <!-- Hitung Status to Cek Kunjungan -->
  <line x1="660" y1="370" x2="660" y2="400" class="arrow"/>
  
  <!-- Cek Kunjungan to Update Statistik -->
  <line x1="660" y1="440" x2="660" y2="470" class="arrow"/>
  
  <!-- Update Statistik to Simpan -->
  <line x1="570" y1="490" x2="450" y2="540" class="arrow"/>
  
  <!-- Simpan to Tampilkan -->
  <line x1="450" y1="580" x2="450" y2="610" class="arrow"/>
  
  <!-- Tampilkan to End -->
  <line x1="450" y1="650" x2="450" y2="665" class="arrow"/>
  
  <!-- Business Rules Box -->
  <rect x="50" y="50" width="250" height="150" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="1"/>
  <text x="60" y="70" class="label" font-weight="bold">Business Rules HT:</text>
  <text x="60" y="90" class="small-label">• Sistolik: 90-139 mmHg (Terkontrol)</text>
  <text x="60" y="105" class="small-label">• Diastolik: 60-89 mmHg (Terkontrol)</text>
  <text x="60" y="120" class="small-label">• Hanya 1 kunjungan pertama/bulan</text>
  <text x="60" y="135" class="small-label">• Auto-calculate year/month</text>
  <text x="60" y="150" class="small-label">• Update statistik real-time</text>
  <text x="60" y="165" class="small-label">• Validasi input: angka positif</text>
  <text x="60" y="180" class="small-label">• Sistolik &gt; Diastolik</text>
  
  <!-- Legend -->
  <rect x="50" y="520" width="200" height="150" fill="none" stroke="#bdc3c7" stroke-width="1"/>
  <text x="60" y="540" class="label" font-weight="bold">Legend:</text>
  
  <circle cx="70" cy="555" r="8" class="start-end"/>
  <text x="85" y="560" class="label">Start/End</text>
  
  <rect x="62" y="570" width="16" height="10" rx="5" class="activity"/>
  <text x="85" y="580" class="label">User Activity</text>
  
  <rect x="62" y="590" width="16" height="10" rx="5" class="process"/>
  <text x="85" y="600" class="label">System Process</text>
  
  <polygon points="70,610 78,618 70,626 62,618" class="decision"/>
  <text x="85" y="620" class="label">Decision</text>
  
  <rect x="62" y="635" width="16" height="10" rx="5" class="error"/>
  <text x="85" y="645" class="label">Error Handling</text>
</svg>