<svg width="1000" height="750" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #2c3e50; }
      .label { font-family: Arial, sans-serif; font-size: 11px; fill: #2c3e50; }
      .small-label { font-family: Arial, sans-serif; font-size: 10px; fill: #2c3e50; }
      .start-end { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
      .activity { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
      .decision { fill: #f39c12; stroke: #e67e22; stroke-width: 2; }
      .process { fill: #27ae60; stroke: #229954; stroke-width: 2; }
      .input { fill: #9b59b6; stroke: #8e44ad; stroke-width: 2; }
      .arrow { stroke: #2c3e50; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .error { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2c3e50" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="500" y="30" text-anchor="middle" class="title">Activity Diagram: Pencatatan Pemeriksaan Diabetes Mellitus (DM)</text>
  
  <!-- Start -->
  <circle cx="500" cy="70" r="15" class="start-end"/>
  <text x="500" y="75" text-anchor="middle" class="label" fill="white">Start</text>
  
  <!-- Pilih Pasien -->
  <rect x="420" y="110" width="160" height="40" rx="20" class="activity"/>
  <text x="500" y="135" text-anchor="middle" class="label" fill="white">Pilih Pasien</text>
  
  <!-- Pilih Jenis Tes -->
  <rect x="420" y="180" width="160" height="40" rx="20" class="activity"/>
  <text x="500" y="205" text-anchor="middle" class="label" fill="white">Pilih Jenis Tes</text>
  
  <!-- Decision: HbA1c atau GDP? -->
  <polygon points="500,250 550,280 500,310 450,280" class="decision"/>
  <text x="500" y="280" text-anchor="middle" class="label">HbA1c atau</text>
  <text x="500" y="295" text-anchor="middle" class="label">GDP?</text>
  
  <!-- HbA1c Path -->
  <rect x="250" y="260" width="140" height="40" rx="20" class="input"/>
  <text x="320" y="280" text-anchor="middle" class="label" fill="white">Input HbA1c</text>
  <text x="320" y="295" text-anchor="middle" class="small-label" fill="white">(% value)</text>
  
  <!-- GDP Path -->
  <rect x="610" y="260" width="140" height="40" rx="20" class="input"/>
  <text x="680" y="280" text-anchor="middle" class="label" fill="white">Input GDP</text>
  <text x="680" y="295" text-anchor="middle" class="small-label" fill="white">(mg/dL value)</text>
  
  <!-- Validasi HbA1c -->
  <rect x="250" y="330" width="140" height="40" rx="20" class="process"/>
  <text x="320" y="350" text-anchor="middle" class="label" fill="white">Validasi HbA1c</text>
  <text x="320" y="365" text-anchor="middle" class="small-label" fill="white">(&lt; 7% = Terkontrol)</text>
  
  <!-- Validasi GDP -->
  <rect x="610" y="330" width="140" height="40" rx="20" class="process"/>
  <text x="680" y="350" text-anchor="middle" class="label" fill="white">Validasi GDP</text>
  <text x="680" y="365" text-anchor="middle" class="small-label" fill="white">(&lt; 126 mg/dL = Terkontrol)</text>
  
  <!-- Hitung Status -->
  <rect x="420" y="400" width="160" height="40" rx="20" class="process"/>
  <text x="500" y="425" text-anchor="middle" class="label" fill="white">Hitung Status Terkontrol</text>
  
  <!-- Cek Kunjungan Pertama -->
  <rect x="420" y="470" width="160" height="40" rx="20" class="process"/>
  <text x="500" y="490" text-anchor="middle" class="label" fill="white">Cek Kunjungan Pertama</text>
  <text x="500" y="505" text-anchor="middle" class="small-label" fill="white">Bulan Ini</text>
  
  <!-- Update Statistik -->
  <rect x="420" y="540" width="160" height="40" rx="20" class="process"/>
  <text x="500" y="565" text-anchor="middle" class="label" fill="white">Update Statistik</text>
  
  <!-- Simpan Data -->
  <rect x="420" y="610" width="160" height="40" rx="20" class="activity"/>
  <text x="500" y="635" text-anchor="middle" class="label" fill="white">Simpan Data</text>
  
  <!-- Tampilkan Hasil -->
  <rect x="420" y="680" width="160" height="40" rx="20" class="activity"/>
  <text x="500" y="700" text-anchor="middle" class="label" fill="white">Tampilkan Hasil</text>
  <text x="500" y="715" text-anchor="middle" class="small-label" fill="white">(Status + Rekomendasi)</text>
  
  <!-- End -->
  <circle cx="500" cy="750" r="15" class="start-end"/>
  <text x="500" y="755" text-anchor="middle" class="label" fill="white">End</text>
  
  <!-- Arrows -->
  <!-- Start to Pilih Pasien -->
  <line x1="500" y1="85" x2="500" y2="110" class="arrow"/>
  
  <!-- Pilih Pasien to Pilih Jenis Tes -->
  <line x1="500" y1="150" x2="500" y2="180" class="arrow"/>
  
  <!-- Pilih Jenis Tes to Decision -->
  <line x1="500" y1="220" x2="500" y2="250" class="arrow"/>
  
  <!-- Decision to HbA1c -->
  <line x1="450" y1="280" x2="390" y2="280" class="arrow"/>
  <text x="420" y="275" class="label">HbA1c</text>
  
  <!-- Decision to GDP -->
  <line x1="550" y1="280" x2="610" y2="280" class="arrow"/>
  <text x="580" y="275" class="label">GDP</text>
  
  <!-- HbA1c to Validasi HbA1c -->
  <line x1="320" y1="300" x2="320" y2="330" class="arrow"/>
  
  <!-- GDP to Validasi GDP -->
  <line x1="680" y1="300" x2="680" y2="330" class="arrow"/>
  
  <!-- Validasi HbA1c to Hitung Status -->
  <line x1="320" y1="370" x2="420" y2="420" class="arrow"/>
  
  <!-- Validasi GDP to Hitung Status -->
  <line x1="680" y1="370" x2="580" y2="420" class="arrow"/>
  
  <!-- Hitung Status to Cek Kunjungan -->
  <line x1="500" y1="440" x2="500" y2="470" class="arrow"/>
  
  <!-- Cek Kunjungan to Update Statistik -->
  <line x1="500" y1="510" x2="500" y2="540" class="arrow"/>
  
  <!-- Update Statistik to Simpan -->
  <line x1="500" y1="580" x2="500" y2="610" class="arrow"/>
  
  <!-- Simpan to Tampilkan -->
  <line x1="500" y1="650" x2="500" y2="680" class="arrow"/>
  
  <!-- Tampilkan to End -->
  <line x1="500" y1="720" x2="500" y2="735" class="arrow"/>
  
  <!-- Business Rules Box -->
  <rect x="50" y="50" width="280" height="180" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="1"/>
  <text x="60" y="70" class="label" font-weight="bold">Business Rules DM:</text>
  <text x="60" y="90" class="small-label">• HbA1c Terkontrol: &lt; 7%</text>
<text x="60" y="105" class="small-label">• GDP Terkontrol: &lt; 126 mg/dL</text>
  <text x="60" y="120" class="small-label">• Jenis tes: HbA1c atau GDP</text>
  <text x="60" y="135" class="small-label">• Hanya 1 kunjungan pertama/bulan</text>
  <text x="60" y="150" class="small-label">• Auto-calculate year/month</text>
  <text x="60" y="165" class="small-label">• Update statistik real-time</text>
  <text x="60" y="180" class="small-label">• Validasi input: angka positif</text>
  <text x="60" y="195" class="small-label">• HbA1c: 0-20%, GDP: 0-1000 mg/dL</text>
  <text x="60" y="210" class="small-label">• Rekomendasi berdasarkan hasil</text>
  
  <!-- Test Types Info -->
  <rect x="750" y="50" width="200" height="120" fill="#e8f5e8" stroke="#27ae60" stroke-width="1"/>
  <text x="760" y="70" class="label" font-weight="bold">Jenis Tes DM:</text>
  <text x="760" y="90" class="small-label">HbA1c (Hemoglobin A1c):</text>
  <text x="760" y="105" class="small-label">• Rata-rata gula darah 2-3 bulan</text>
  <text x="760" y="120" class="small-label">• Satuan: % (persen)</text>
  <text x="760" y="135" class="small-label">GDP (Gula Darah Puasa):</text>
  <text x="760" y="150" class="small-label">• Gula darah saat puasa 8+ jam</text>
  <text x="760" y="165" class="small-label">• Satuan: mg/dL</text>
  
  <!-- Legend -->
  <rect x="50" y="550" width="200" height="170" fill="none" stroke="#bdc3c7" stroke-width="1"/>
  <text x="60" y="570" class="label" font-weight="bold">Legend:</text>
  
  <circle cx="70" cy="585" r="8" class="start-end"/>
  <text x="85" y="590" class="label">Start/End</text>
  
  <rect x="62" y="600" width="16" height="10" rx="5" class="activity"/>
  <text x="85" y="610" class="label">User Activity</text>
  
  <rect x="62" y="620" width="16" height="10" rx="5" class="input"/>
  <text x="85" y="630" class="label">Data Input</text>
  
  <rect x="62" y="640" width="16" height="10" rx="5" class="process"/>
  <text x="85" y="650" class="label">System Process</text>
  
  <polygon points="70,660 78,668 70,676 62,668" class="decision"/>
  <text x="85" y="670" class="label">Decision</text>
  
  <rect x="62" y="685" width="16" height="10" rx="5" class="error"/>
  <text x="85" y="695" class="label">Error Handling</text>
</svg>