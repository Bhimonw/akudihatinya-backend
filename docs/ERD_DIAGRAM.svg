<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .entity-box { fill: #f8f9fa; stroke: #343a40; stroke-width: 2; }
      .entity-title { fill: #495057; font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; }
      .entity-attr { fill: #6c757d; font-family: Arial, sans-serif; font-size: 11px; }
      .pk { fill: #dc3545; font-weight: bold; }
      .fk { fill: #007bff; font-weight: bold; }
      .relation-line { stroke: #6c757d; stroke-width: 2; fill: none; }
      .relation-text { fill: #495057; font-family: Arial, sans-serif; font-size: 10px; }
    </style>
  </defs>
  
  <!-- Users Entity -->
  <rect x="50" y="50" width="180" height="160" class="entity-box"/>
  <text x="140" y="70" text-anchor="middle" class="entity-title">Users</text>
  <line x1="60" y1="75" x2="220" y2="75" stroke="#343a40" stroke-width="1"/>
  <text x="60" y="90" class="entity-attr pk">• id (PK)</text>
  <text x="60" y="105" class="entity-attr">• username</text>
  <text x="60" y="120" class="entity-attr">• password</text>
  <text x="60" y="135" class="entity-attr">• name</text>
  <text x="60" y="150" class="entity-attr">• role</text>
  <text x="60" y="165" class="entity-attr fk">• puskesmas_id (FK)</text>
  <text x="60" y="180" class="entity-attr">• profile_picture</text>
  <text x="60" y="195" class="entity-attr">• timestamps</text>
  
  <!-- Puskesmas Entity -->
  <rect x="300" y="50" width="180" height="120" class="entity-box"/>
  <text x="390" y="70" text-anchor="middle" class="entity-title">Puskesmas</text>
  <line x1="310" y1="75" x2="470" y2="75" stroke="#343a40" stroke-width="1"/>
  <text x="310" y="90" class="entity-attr pk">• id (PK)</text>
  <text x="310" y="105" class="entity-attr">• name</text>
  <text x="310" y="120" class="entity-attr">• timestamps</text>
  
  <!-- Patients Entity -->
  <rect x="550" y="50" width="200" height="220" class="entity-box"/>
  <text x="650" y="70" text-anchor="middle" class="entity-title">Patients</text>
  <line x1="560" y1="75" x2="740" y2="75" stroke="#343a40" stroke-width="1"/>
  <text x="560" y="90" class="entity-attr pk">• id (PK)</text>
  <text x="560" y="105" class="entity-attr fk">• puskesmas_id (FK)</text>
  <text x="560" y="120" class="entity-attr">• nik</text>
  <text x="560" y="135" class="entity-attr">• bpjs_number</text>
  <text x="560" y="150" class="entity-attr">• medical_record_number</text>
  <text x="560" y="165" class="entity-attr">• name</text>
  <text x="560" y="180" class="entity-attr">• address</text>
  <text x="560" y="195" class="entity-attr">• phone_number</text>
  <text x="560" y="210" class="entity-attr">• gender</text>
  <text x="560" y="225" class="entity-attr">• birth_date</text>
  <text x="560" y="240" class="entity-attr">• age</text>
  <text x="560" y="255" class="entity-attr">• ht_years (JSON)</text>
  <text x="560" y="270" class="entity-attr">• dm_years (JSON)</text>
  
  <!-- HT_Examinations Entity -->
  <rect x="50" y="350" width="200" height="200" class="entity-box"/>
  <text x="150" y="370" text-anchor="middle" class="entity-title">HT_Examinations</text>
  <line x1="60" y1="375" x2="240" y2="375" stroke="#343a40" stroke-width="1"/>
  <text x="60" y="390" class="entity-attr pk">• id (PK)</text>
  <text x="60" y="405" class="entity-attr fk">• patient_id (FK)</text>
  <text x="60" y="420" class="entity-attr fk">• puskesmas_id (FK)</text>
  <text x="60" y="435" class="entity-attr">• examination_date</text>
  <text x="60" y="450" class="entity-attr">• systolic</text>
  <text x="60" y="465" class="entity-attr">• diastolic</text>
  <text x="60" y="480" class="entity-attr">• is_controlled</text>
  <text x="60" y="495" class="entity-attr">• is_first_visit_this_month</text>
  <text x="60" y="510" class="entity-attr">• is_standard_patient</text>
  <text x="60" y="525" class="entity-attr">• year, month</text>
  <text x="60" y="540" class="entity-attr">• is_archived</text>
  
  <!-- DM_Examinations Entity -->
  <rect x="300" y="350" width="200" height="200" class="entity-box"/>
  <text x="400" y="370" text-anchor="middle" class="entity-title">DM_Examinations</text>
  <line x1="310" y1="375" x2="490" y2="375" stroke="#343a40" stroke-width="1"/>
  <text x="310" y="390" class="entity-attr pk">• id (PK)</text>
  <text x="310" y="405" class="entity-attr fk">• patient_id (FK)</text>
  <text x="310" y="420" class="entity-attr fk">• puskesmas_id (FK)</text>
  <text x="310" y="435" class="entity-attr">• examination_date</text>
  <text x="310" y="450" class="entity-attr">• examination_type</text>
  <text x="310" y="465" class="entity-attr">• result</text>
  <text x="310" y="480" class="entity-attr">• is_controlled</text>
  <text x="310" y="495" class="entity-attr">• is_first_visit_this_month</text>
  <text x="310" y="510" class="entity-attr">• is_standard_patient</text>
  <text x="310" y="525" class="entity-attr">• year, month</text>
  <text x="310" y="540" class="entity-attr">• is_archived</text>
  
  <!-- Yearly_Targets Entity -->
  <rect x="550" y="350" width="180" height="140" class="entity-box"/>
  <text x="640" y="370" text-anchor="middle" class="entity-title">Yearly_Targets</text>
  <line x1="560" y1="375" x2="720" y2="375" stroke="#343a40" stroke-width="1"/>
  <text x="560" y="390" class="entity-attr pk">• id (PK)</text>
  <text x="560" y="405" class="entity-attr fk">• puskesmas_id (FK)</text>
  <text x="560" y="420" class="entity-attr">• disease_type</text>
  <text x="560" y="435" class="entity-attr">• year</text>
  <text x="560" y="450" class="entity-attr">• target_count</text>
  <text x="560" y="465" class="entity-attr">• timestamps</text>
  
  <!-- User_Refresh_Tokens Entity -->
  <rect x="800" y="50" width="180" height="140" class="entity-box"/>
  <text x="890" y="70" text-anchor="middle" class="entity-title">User_Refresh_Tokens</text>
  <line x1="810" y1="75" x2="970" y2="75" stroke="#343a40" stroke-width="1"/>
  <text x="810" y="90" class="entity-attr pk">• id (PK)</text>
  <text x="810" y="105" class="entity-attr fk">• user_id (FK)</text>
  <text x="810" y="120" class="entity-attr">• token</text>
  <text x="810" y="135" class="entity-attr">• expires_at</text>
  <text x="810" y="150" class="entity-attr">• timestamps</text>
  
  <!-- Monthly_Statistics_Cache Entity -->
  <rect x="800" y="350" width="200" height="160" class="entity-box"/>
  <text x="900" y="370" text-anchor="middle" class="entity-title">Monthly_Statistics_Cache</text>
  <line x1="810" y1="375" x2="990" y2="375" stroke="#343a40" stroke-width="1"/>
  <text x="810" y="390" class="entity-attr pk">• id (PK)</text>
  <text x="810" y="405" class="entity-attr fk">• puskesmas_id (FK)</text>
  <text x="810" y="420" class="entity-attr">• disease_type</text>
  <text x="810" y="435" class="entity-attr">• year</text>
  <text x="810" y="450" class="entity-attr">• month</text>
  <text x="810" y="465" class="entity-attr">• statistics_data (JSON)</text>
  <text x="810" y="480" class="entity-attr">• timestamps</text>
  
  <!-- Relationships -->
  
  <!-- Users to Puskesmas (Many-to-One) -->
  <line x1="230" y1="130" x2="300" y2="110" class="relation-line"/>
  <text x="265" y="115" class="relation-text">belongs to</text>
  <circle cx="300" cy="110" r="3" fill="#343a40"/>
  <text x="305" y="115" class="relation-text">1</text>
  <text x="225" y="135" class="relation-text">N</text>
  
  <!-- Puskesmas to Patients (One-to-Many) -->
  <line x1="480" y1="110" x2="550" y2="130" class="relation-line"/>
  <text x="515" y="115" class="relation-text">has</text>
  <circle cx="480" cy="110" r="3" fill="#343a40"/>
  <text x="475" y="115" class="relation-text">1</text>
  <text x="545" y="135" class="relation-text">N</text>
  
  <!-- Patients to HT_Examinations (One-to-Many) -->
  <line x1="550" y1="200" x2="250" y2="350" class="relation-line"/>
  <text x="400" y="275" class="relation-text">has HT exams</text>
  <circle cx="550" cy="200" r="3" fill="#343a40"/>
  <text x="545" y="205" class="relation-text">1</text>
  <text x="245" y="355" class="relation-text">N</text>
  
  <!-- Patients to DM_Examinations (One-to-Many) -->
  <line x1="600" y1="270" x2="450" y2="350" class="relation-line"/>
  <text x="525" y="310" class="relation-text">has DM exams</text>
  <circle cx="600" cy="270" r="3" fill="#343a40"/>
  <text x="595" y="275" class="relation-text">1</text>
  <text x="445" y="355" class="relation-text">N</text>
  
  <!-- Puskesmas to Yearly_Targets (One-to-Many) -->
  <line x1="450" y1="170" x2="600" y2="350" class="relation-line"/>
  <text x="525" y="260" class="relation-text">has targets</text>
  <circle cx="450" cy="170" r="3" fill="#343a40"/>
  <text x="445" y="175" class="relation-text">1</text>
  <text x="595" y="355" class="relation-text">N</text>
  
  <!-- Users to User_Refresh_Tokens (One-to-Many) -->
  <line x1="230" y1="100" x2="800" y2="120" class="relation-line"/>
  <text x="515" y="105" class="relation-text">has tokens</text>
  <circle cx="230" cy="100" r="3" fill="#343a40"/>
  <text x="225" y="105" class="relation-text">1</text>
  <text x="795" y="125" class="relation-text">N</text>
  
  <!-- Puskesmas to Monthly_Statistics_Cache (One-to-Many) -->
  <line x1="480" y1="150" x2="800" y2="400" class="relation-line"/>
  <text x="640" y="275" class="relation-text">has cache</text>
  <circle cx="480" cy="150" r="3" fill="#343a40"/>
  <text x="475" y="155" class="relation-text">1</text>
  <text x="795" y="405" class="relation-text">N</text>
  
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" style="fill: #343a40; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold;">Entity Relationship Diagram - Sistem Akudihatinya</text>
  
  <!-- Legend -->
  <rect x="50" y="600" width="300" height="120" fill="#f8f9fa" stroke="#343a40" stroke-width="1"/>
  <text x="200" y="620" text-anchor="middle" style="fill: #343a40; font-family: Arial, sans-serif; font-size: 14px; font-weight: bold;">Legend</text>
  <text x="60" y="640" class="entity-attr pk">• Primary Key (PK)</text>
  <text x="60" y="655" class="entity-attr fk">• Foreign Key (FK)</text>
  <text x="60" y="670" class="entity-attr">• Regular Attribute</text>
  <line x1="60" y1="685" x2="80" y2="685" class="relation-line"/>
  <text x="85" y="690" class="relation-text">Relationship Line</text>
  <circle cx="60" cy="705" r="3" fill="#343a40"/>
  <text x="70" y="710" class="relation-text">One (1) / Many (N)</text>
</svg>